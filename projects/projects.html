<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jason Yap | Projects</title>
  <link rel="stylesheet" href="../css/style.css" />
  <style>
    /* Easter Egg Animations */
    @keyframes nuclearExplodePhase1 { 
      0% { transform: scale(1); opacity: 1; filter: blur(0); } 
      25% { transform: scale(1.5) rotate(45deg); opacity: 0.8; filter: blur(2px); } 
      50% { transform: scale(2) rotate(90deg); opacity: 0.5; filter: blur(5px); } 
      75% { transform: scale(2.5) rotate(135deg); opacity: 0.2; filter: blur(10px); } 
      100% { transform: scale(3) rotate(180deg); opacity: 0; filter: blur(20px); } 
    }
    @keyframes screenShake { 
      0%,100%{transform:translateX(0) translateY(0);} 
      10%,30%,50%,70%,90%{transform:translateX(-10px) translateY(-5px);} 
      20%,40%,60%,80%{transform:translateX(10px) translateY(5px);} 
    }
    @keyframes explosionPulse { 
      0% { transform: translate(-50%, -50%) scale(0); opacity: 1; } 
      50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.7; } 
      100% { transform: translate(-50%, -50%) scale(2); opacity: 0; } 
    }
    @keyframes matrixFall { 
      0% { transform: translateY(-20px) rotate(0deg); opacity: 1; } 
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; } 
    }
    @keyframes emergencyFlash { 
      0%,100%{opacity:0;} 
      50%{opacity:1;} 
    }
    
    /* Enhanced project image for easter egg */
    .project-image {
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .project-image:hover {
      transform: scale(0.52);
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }

    /* Easter egg counter (hidden) */
    .click-counter {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0,0,0,0.8);
      color: #00ff00;
      padding: 5px 10px;
      border-radius: 5px;
      font-family: monospace;
      font-size: 12px;
      z-index: 10000;
      display: none;
    }

    /* Matrix rain effect */
    .matrix-char {
      position: fixed;
      color: #00ff00;
      font-family: monospace;
      font-size: 14px;
      pointer-events: none;
      z-index: 9999;
    }

    /* Emergency warning */
    .emergency-warning {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #ff0000;
      color: white;
      display: none;
      justify-content: center;
      align-items: center;
      font-size: 3em;
      font-weight: bold;
      z-index: 10000;
      flex-direction: column;
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>
  
  <!-- Easter Egg Elements -->
  <div class="click-counter" id="click-counter">Clicks: 0/11</div>
  <div class="emergency-warning" id="emergency-warning">
    <div>üö® CRITICAL ERROR üö®</div>
    <div style="font-size: 0.5em; margin-top: 20px;">SYSTEM OVERLOAD</div>
  </div>

  <div class="content">
    <header>
      <nav class="main-nav">
        <a href="../index.html">Home</a><a href="../html/resume.html">Resume</a><a href="../projects/projects.html">Projects</a><a href="../recipes/recipes.html">Recipes</a>
      </nav>
    </header>
    <main>
      <section id="projects">
        <h2>Projects</h2>
        <div class="project about-card">
          <h3>slimeScraper ‚Äì Procedural FPS</h3>
          <img src="../assets/slimeScraper.jpg" alt="slimeScraper Screenshot" class="project-image" id="slimescraper-image" />
          <p>A Unity-built roguelike FPS Prototype that generates random office floors each run. Built with C# and Unity in 4 weeks.</p>
          <div class="game-container">
            <h3>üéÆ Play slimeScraper in Browser</h3>
            <div class="game-preview" id="game-preview">
              <div class="game-warning">
                <p>‚ö†Ô∏è <strong>Large File Warning</strong></p>
                <p>This WebGL game is ~25MB and may take time to load.</p>
                <p>Only load if you have a stable internet connection.</p>
                <p>Game has bugs, Sorry in advance if you almost beat the game!</p>
              </div>
              <button class="load-game-btn" onclick="loadGame()">üéÆ Click to Load Game</button>
              <p><small>WebGL Game - Click to load when ready</small></p>
            </div>
            <div class="game-embed" id="game-embed" style="display:none;">
              <iframe frameborder="0" src="https://itch.io/embed/3964951" width="1000" height="800"><a href="https://jasonzyap.itch.io/slimescraper">slimeScraper by jasonzyap</a></iframe>
              <br>
              <button class="unload-game-btn" onclick="unloadGame()">‚ùå Unload Game</button>
            </div>
          </div>
          <div style="margin-top:2rem;">
            <a href="https://drive.google.com/file/d/1kTFxKTB3IJgjsaHWvTi8OBCw61ecxvPT/view?usp=sharing" target="_blank" class="button">‚¨áÔ∏è Download Game (.zip)</a>
            <p class="instructions">After downloading, open the .exe file, extract the ZIP and double-click the `.exe` to play the game. Enjoy the Prototype!</p>
          </div>
        </div>
      </section>
      <hr class="projects-separator">
      <section id="ai-generator" class="project about-card">
        <h2>AI Text Generator</h2>
        <p>Generate AI-powered text responses using OpenAI.</p>
        <div class="generator-container">
          <button id="load-ai-generator" class="button">Open Generator</button>
          <div id="ai-generator-panel" style="display:none; margin-top:1.5rem;">
            <div class="model-selector-group">
              <label for="model-select" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333;">AI Model:</label>
              <div style="display: flex; align-items: center; gap: 15px;">
                <select id="model-select" class="model-select" style="padding: 8px 12px; border: 1px solid #ccc; border-radius: 5px; background: white; flex: 1;">
                  <option value="openai">OpenAI GPT-3.5</option>
                </select>
                <span id="current-model-badge" style="padding: 5px 12px; border-radius: 15px; font-size: 0.8rem; font-weight: bold; color: white; background: #10a37f;">OpenAI GPT-3.5</span>
              </div>
            </div>
            <div class="ai-chat-container" style="margin-top: 1rem;">
              <div id="chat-messages" class="chat-messages">
                <div class="message ai-message">
                  <div class="message-content">
                    <div class="model-indicator">ü§ñ AI Assistant</div>
                    Hello! I'm your AI assistant powered by OpenAI. Start chatting!
                  </div>
                </div>
              </div>
              <div class="input-area">
                <textarea id="user-input" placeholder="Ask me anything or give me a creative prompt..." rows="3" class="input-field" style="width: 100%; margin-bottom: 0.5rem;"></textarea>
                <button id="generate-ai" class="button accent">Generate Text</button>
              </div>
            </div>
            <p style="text-align: center; font-size: 0.7rem; color: #999; margin-top: 0.5rem;">Powered by OpenAI ‚Ä¢ No data retention ‚Ä¢ Rate limited for fair usage</p>
          </div>
        </div>
      </section>
    </main>
    <footer id="footcolor">
      <p>¬© 2025 Jason Yap ‚Äî This website is my personal project.</p>
      <p><a href="mailto:jason-yap@outlook.com">Email</a> | <a href="https://instagram.com/yappotamus" target="_blank">Instagram</a> | <a href="https://github.com/just-anotherday" target="_blank">GitHub</a></p>
    </footer>
  </div>
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  
  <!-- Integrated Game and Easter Egg Script -->
  <script>
    // Easter egg variables
    let clickCount = 0;
    const REQUIRED_CLICKS = 11;
    let easterEggActive = false;

    // Game loading functions
    function loadGame() {
      console.log("üéÆ Loading game...");
      const preview = document.getElementById('game-preview');
      const embed = document.getElementById('game-embed');
      const iframe = document.getElementById('game-iframe');
      
      if (preview && embed && iframe) {
        preview.style.display = 'none';
        embed.style.display = 'block';
        // Replace with your actual game URL
        iframe.src = '../games/slimeScraper/index.html';
        console.log("‚úÖ Game loaded successfully");
        
        // Show loading feedback
        const originalBtn = document.querySelector('.load-game-btn');
        if (originalBtn) {
          originalBtn.textContent = 'üîÑ Loading...';
          originalBtn.disabled = true;
        }
      } else {
        console.error("‚ùå Game elements not found");
        alert("Error: Game elements not found. Check console for details.");
      }
    }

    function unloadGame() {
      console.log("‚ùå Unloading game...");
      const preview = document.getElementById('game-preview');
      const embed = document.getElementById('game-embed');
      const iframe = document.getElementById('game-iframe');
      
      if (preview && embed && iframe) {
        preview.style.display = 'block';
        embed.style.display = 'none';
        iframe.src = 'about:blank';
        
        // Reset button
        const originalBtn = document.querySelector('.load-game-btn');
        if (originalBtn) {
          originalBtn.textContent = 'üéÆ Click to Load Game';
          originalBtn.disabled = false;
        }
        
        console.log("‚úÖ Game unloaded successfully");
      }
    }

    // Matrix rain effect
    function createMatrixRain() {
      const chars = '01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥';
      for (let i = 0; i < 50; i++) {
        setTimeout(() => {
          const char = document.createElement('div');
          char.className = 'matrix-char';
          char.textContent = chars[Math.floor(Math.random() * chars.length)];
          char.style.left = Math.random() * 100 + 'vw';
          char.style.top = '-20px';
          char.style.animation = `matrixFall ${2 + Math.random() * 3}s linear forwards`;
          document.body.appendChild(char);
          
          setTimeout(() => {
            if (char.parentNode) {
              char.parentNode.removeChild(char);
            }
          }, 5000);
        }, i * 100);
      }
    }

    // Full easter egg activation
    function activateFullEasterEgg() {
      console.log("üí• FULL EASTER EGG ACTIVATED!");
      easterEggActive = true;
      
      // Hide counter
      document.getElementById('click-counter').style.display = 'none';
      
      // Show emergency warning
      const warning = document.getElementById('emergency-warning');
      warning.style.display = 'flex';
      warning.style.animation = 'emergencyFlash 0.5s infinite';
      
      // Nuclear explosion on image
      const projectImage = document.getElementById('slimescraper-image');
      projectImage.style.animation = 'nuclearExplodePhase1 3s forwards';
      
      // Screen shake
      document.body.style.animation = 'screenShake 1s infinite';
      
      // Create multiple explosion overlays
      for (let i = 0; i < 5; i++) {
        setTimeout(() => {
          const explosion = document.createElement('div');
          explosion.style.position = 'fixed';
          explosion.style.top = Math.random() * 100 + 'vh';
          explosion.style.left = Math.random() * 100 + 'vw';
          explosion.style.width = '100px';
          explosion.style.height = '100px';
          explosion.style.background = 'radial-gradient(circle, #ff0000, #ff8800, #ffff00)';
          explosion.style.borderRadius = '50%';
          explosion.style.animation = 'explosionPulse 1s ease-out';
          explosion.style.zIndex = '1000';
          explosion.style.pointerEvents = 'none';
          document.body.appendChild(explosion);
          
          setTimeout(() => {
            if (explosion.parentNode) {
              explosion.parentNode.removeChild(explosion);
            }
          }, 1000);
        }, i * 500);
      }
      
      // Massive confetti explosion
      if (typeof confetti === 'function') {
        for (let i = 0; i < 10; i++) {
          setTimeout(() => {
            confetti({
              particleCount: 200,
              spread: 100,
              origin: { y: Math.random(), x: Math.random() },
              colors: ['#ff0000', '#ff8800', '#ffff00', '#00ff00', '#0000ff']
            });
          }, i * 300);
        }
      }
      
      // Matrix rain effect
      createMatrixRain();
      setInterval(createMatrixRain, 3000);
      
      // Reset after 10 seconds
      setTimeout(() => {
        resetEasterEgg();
      }, 10000);
    }

    // Reset easter egg
    function resetEasterEgg() {
      easterEggActive = false;
      clickCount = 0;
      
      const projectImage = document.getElementById('slimescraper-image');
      const warning = document.getElementById('emergency-warning');
      const counter = document.getElementById('click-counter');
      
      projectImage.style.animation = '';
      document.body.style.animation = '';
      warning.style.display = 'none';
      counter.style.display = 'none';
      
      // Remove all matrix characters
      document.querySelectorAll('.matrix-char').forEach(char => {
        if (char.parentNode) {
          char.parentNode.removeChild(char);
        }
      });
      
      console.log("üîÑ Easter egg reset");
    }

    // Easter egg click handler
    function initEasterEgg() {
      const projectImage = document.getElementById('slimescraper-image');
      const counter = document.getElementById('click-counter');
      
      if (projectImage) {
        projectImage.addEventListener('click', function() {
          if (easterEggActive) return;
          
          clickCount++;
          console.log(`ü•ö Click ${clickCount}/${REQUIRED_CLICKS}`);
          
          // Show counter
          counter.textContent = `Clicks: ${clickCount}/${REQUIRED_CLICKS}`;
          counter.style.display = 'block';
          
          // Small effect on each click
          this.style.transform = 'scale(0.48)';
          setTimeout(() => {
            this.style.transform = 'scale(0.5)';
          }, 100);
          
          // Small confetti on each click
          if (typeof confetti === 'function') {
            confetti({
              particleCount: 20,
              spread: 30,
              origin: { y: 0.7 },
              colors: ['#ff0000', '#ff8800']
            });
          }
          
          // Check if reached required clicks
          if (clickCount >= REQUIRED_CLICKS) {
            activateFullEasterEgg();
          }
          
          // Hide counter after 2 seconds
          setTimeout(() => {
            if (clickCount < REQUIRED_CLICKS) {
              counter.style.display = 'none';
            }
          }, 2000);
        });
        
        console.log("‚úÖ 11-click easter egg initialized");
      } else {
        console.log("‚ùå Project image not found for easter egg");
      }
    }

    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      console.log("üöÄ Initializing project page...");
      
      initEasterEgg();
      
    });

    // Fallback in case module import fails
    window.addEventListener('load', function() {
      setTimeout(() => {
        const generateBtn = document.getElementById('generate-ai');
        const loadBtn = document.getElementById('load-ai-generator');
        
        if (generateBtn && loadBtn && !generateBtn.onclick) {
          console.log("AI Generator module not loaded, using fallback");
          loadBtn.onclick = function() {
            const panel = document.getElementById('ai-generator-panel');
            const isVisible = panel.style.display === 'block';
            panel.style.display = isVisible ? 'none' : 'block';
            loadBtn.textContent = isVisible ? 'Open Generator' : 'Close Generator';
          };
          
          generateBtn.onclick = function() {
            alert('AI Generator is currently unavailable. Please check the console for details.');
          };
        }
      }, 2000);
    });
  </script>

  <!-- AI Generator Script -->
  <script type="module">
    import { initAIGenerator } from '../js/aiGenerator.js';
    document.addEventListener('DOMContentLoaded', () => {
      console.log("ü§ñ Initializing AI Generator...");
      initAIGenerator();
    });
  </script>
</body>
</html>